<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:editors="http://java.sun.com/jsf/composite/editors">
    <h:head>
        <h:outputStylesheet library="css"  name="common-style.css"/>
        <h:outputScript library="js" name="jquery.min.js"/>
        <h:outputScript library="js" name="utils.js"/>

        <title>Facelet Title</title>

    </h:head>
    <h:body>
        <h:form>
            <div class="main-container">
                <h:panelGroup id="left-bar" layout="block" 
                              class="left-side-bar">

                    <div class="search-panel">
                        <h:outputLabel value="Search:"/>
                        <h:inputText class="search-key"/>
                    </div>

                    <div class="tools">
                        <button class="new">New node</button>
                        <button>Edit node</button>
                        <button>Delete node</button>

                        <!-- Hiden Form to fill new node-->
                        <h:panelGroup class="edit-new hidden" layout="block">
                            <h:outputLabel value="Name: "/>
                            <h:inputText id="name" 
                                         value="${viewController.newNode.name}"/>
                            <h:outputLabel value="Description: "/>
                            <h:inputText id="description"
                                         value="${viewController.newNode.description}"/>


                            <h:commandButton class="save" value="Save"
                                             action="${viewController.createNode()}"/>
                        </h:panelGroup>
                    </div>

                    <div id="sources-panel">
                        <div class="list-title">
                            Concept
                        </div>
                        <h:panelGroup id="table-container" layout="block"
                                      class="table-container">
                            <h:dataTable  id="sources-table"
                                          value="${viewController.sourceNodes}"
                                          var="node">

                                <h:column>
                                    <div class="node-info">
                                        <div class="node-name">
                                            <h:outputText value="${node.name}"/>
                                        </div>
                                        <div class="node-description">
                                            <h:outputText value="${node.description}"/>
                                        </div>
                                    </div>
                                    <h:commandButton class="load-source" 
                                                     style="display: none;" type="submit"
                                                     action="${viewController.loadSource()}"/>
                                </h:column>
                            </h:dataTable>
                        </h:panelGroup>
                    </div>
                </h:panelGroup>

                <h:panelGroup id="center-content" layout="block"
                              class="center-content">
                    center content

                    <div class="top-concept">
                        <editors:tinymce value="#{viewController.sourceContent}"/>
                    </div>

                    <div class="bottom-concept">
                        <editors:tinymce value="#{viewController.relatedContent}"/>
                    </div>
                </h:panelGroup>

                <h:panelGroup id="right-bar" layout="block"
                              class="right-side-bar">
                    <div class="search-panel">
                        <h:outputLabel value="Search:"/>
                        <h:inputText class="search-key"/>
                    </div>
                    <div class="tools">
                        <button>New relationship</button>
                        <button>Remove relationship</button>
                    </div>
                    <div class="list-title">
                        Related
                    </div>
                    <h:dataTable  class="related-nodes"
                                  value="${viewController.relatedNodes}"
                                  var="node">
                        <h:column>
                            <div class="node-info">
                                <div class="node-name">
                                    <h:outputText value="${node.name}"/>
                                </div>
                                <div class="node-description">
                                    <h:outputText value="${node.description}"/>
                                </div>
                            </div>
                            <h:commandButton class="load-related" 
                                             style="display: none;" type="submit"
                                             action="${viewController.loadRelated()}"/>
                        </h:column>
                    </h:dataTable>
                </h:panelGroup>
            </div>
            <h:messages infoClass="info-message" 
                        errorClass="erro-mesage"/>
        </h:form>
        <script type="text/javascript">
            setupView();
        </script>
    </h:body>

</html>

